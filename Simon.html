<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Juego Simón - Modo Oscuro</title>
    <style>
        :root {
            --bg-color: #121212;
            --text-color: #e0e0e0;
            --button-border: #333;
            --highlight: rgba(255, 255, 255, 0.3);
            --score-bg: #1e1e1e;
            --shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
        }
        
        body {
            font-family: 'Arial', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }
        
        h1 {
            color: var(--text-color);
            margin-bottom: 20px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
        }
        
        .game-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .simon-board {
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-gap: 20px;
            margin-bottom: 20px;
        }
        
        .simon-button {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            cursor: pointer;
            border: 5px solid var(--button-border);
            transition: transform 0.1s, box-shadow 0.3s;
            box-shadow: var(--shadow);
        }
        
        .simon-button:hover {
            transform: scale(1.02);
            box-shadow: 0 6px 12px rgba(0,0,0,0.6);
        }
        
        .simon-button:active, .simon-button.active {
            transform: scale(0.95);
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        
        .simon-button.active {
            opacity: 0.8;
            box-shadow: inset 0 0 20px var(--highlight);
        }
        
        #green {
            background-color: #27ae60;
        }
        
        #red {
            background-color: #e74c3c;
        }
        
        #yellow {
            background-color: #f39c12;
        }
        
        #blue {
            background-color: #3498db;
        }
        
        .controls {
            margin-bottom: 20px;
        }
        
        button {
            padding: 12px 24px;
            font-size: 16px;
            background-color: #2c3e50;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            margin: 0 10px;
            transition: all 0.3s;
            box-shadow: var(--shadow);
        }
        
        button:hover {
            background-color: #34495e;
            transform: translateY(-2px);
        }
        
        button:active {
            transform: translateY(0);
        }
        
        #start-btn {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
        }
        
        #restart-btn {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
        }
        
        .score-container {
    display: flex;
    justify-content: center;
    gap: 20px; /* Espacio entre los contenedores */
    width: 100%;
    margin-bottom: 30px;
        }
        
        .score-box {
    display: inline-block;
    text-align: center;
    background-color: var(--score-bg);
    padding: 15px 25px;
    border-radius: 10px;
    box-shadow: var(--shadow);
    min-width: 100px;
        }
        
        .score-title {
            font-weight: bold;
            margin-bottom: 5px;
            color: #bdc3c7;
            font-size: 14px;
        }
        
        .score-value {
            font-size: 28px;
            font-weight: bold;
        }
        
        .message {
            font-size: 18px;
            margin-bottom: 30px;
            min-height: 27px;
            padding: 10px 20px;
            background-color: var(--score-bg);
            border-radius: 8px;
            box-shadow: var(--shadow);
        }
        
        @media (max-width: 600px) {
            .simon-button {
                width: 120px;
                height: 120px;
            }
            
            .score-container {
                width: 100%;
                flex-direction: column;
                gap: 10px;
            }
            
            .controls {
                display: flex;
                flex-direction: column;
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <h1>Juego Simón</h1>
    
    <div class="message" id="message">Presiona Iniciar para jugar</div>
    
<div class="score-container">
    <div class="score-box">
        <div class="score-title">Puntuación</div>
        <div class="score-value" id="score">0</div>
    </div>
    <div class="score-box">
        <div class="score-title">Récord</div>
        <div class="score-value" id="high-score">0</div>
    </div>
</div>
    
    <div class="game-container">
        <div class="simon-board">
            <div class="simon-button" id="green"></div>
            <div class="simon-button" id="red"></div>
            <div class="simon-button" id="yellow"></div>
            <div class="simon-button" id="blue"></div>
        </div>
    </div>
    
    <div class="controls">
        <button id="start-btn">Iniciar</button>
        <button id="restart-btn">Reiniciar</button>
    </div>
    
    <script>
        // Elementos del DOM
        const buttons = document.querySelectorAll('.simon-button');
        const startBtn = document.getElementById('start-btn');
        const restartBtn = document.getElementById('restart-btn');
        const scoreDisplay = document.getElementById('score');
        const highScoreDisplay = document.getElementById('high-score');
        const messageDisplay = document.getElementById('message');
        
        // Variables del juego
        let sequence = [];
        let playerSequence = [];
        let score = 0;
        let highScore = localStorage.getItem('simonHighScore') || 0;
        let isGameActive = false;
        let sounds = {};
        
        // Inicializar sonidos
        function initSounds() {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const colors = ['green', 'red', 'yellow', 'blue'];
            const frequencies = [392.00, 329.63, 261.63, 493.88]; // Notas musicales correspondientes
            
            colors.forEach((color, index) => {
                sounds[color] = function() {
                    const oscillator = audioContext.createOscillator();
                    const gainNode = audioContext.createGain();
                    
                    oscillator.type = 'sine';
                    oscillator.frequency.value = frequencies[index];
                    oscillator.connect(gainNode);
                    gainNode.connect(audioContext.destination);
                    
                    gainNode.gain.exponentialRampToValueAtTime(
                        0.00001, 
                        audioContext.currentTime + 0.5
                    );
                    
                    oscillator.start();
                    oscillator.stop(audioContext.currentTime + 0.5);
                };
            });
        }
        
        // Actualizar el récord al cargar la página
        highScoreDisplay.textContent = highScore;
        initSounds();
        
        // Resaltar un botón
        function highlightButton(color) {
            const button = document.getElementById(color);
            button.classList.add('active');
            if (sounds[color]) sounds[color]();
            
            setTimeout(() => {
                button.classList.remove('active');
            }, 500);
        }
        
        // Generar el siguiente paso en la secuencia
        function nextStep() {
            const colors = ['green', 'red', 'yellow', 'blue'];
            const randomColor = colors[Math.floor(Math.random() * colors.length)];
            sequence.push(randomColor);
            
            // Mostrar la secuencia al jugador
            showSequence();
        }
        
        // Mostrar la secuencia al jugador
        function showSequence() {
            let i = 0;
            const interval = setInterval(() => {
                highlightButton(sequence[i]);
                i++;
                
                if (i >= sequence.length) {
                    clearInterval(interval);
                    isGameActive = true;
                    messageDisplay.textContent = "Tu turno! Repite la secuencia";
                }
            }, 800);
        }
        
        // Manejar el clic del jugador
        function handleButtonClick(color) {
            if (!isGameActive) return;
            
            highlightButton(color);
            playerSequence.push(color);
            
            // Verificar si el jugador acertó
            if (playerSequence[playerSequence.length - 1] !== sequence[playerSequence.length - 1]) {
                gameOver();
                return;
            }
            
            // Si completó la secuencia correctamente
            if (playerSequence.length === sequence.length) {
                playerSequence = [];
                score++;
                scoreDisplay.textContent = score;
                messageDisplay.textContent = "¡Correcto! Preparando siguiente nivel...";
                isGameActive = false;
                
                setTimeout(() => {
                    nextStep();
                }, 1500);
            }
        }
        
        // Game over
        function gameOver() {
            isGameActive = false;
            messageDisplay.textContent = `¡Game Over! Puntuación: ${score}`;
            
            // Efecto de game over
            if (score > 0) {
                const flash = setInterval(() => {
                    document.body.style.backgroundColor = document.body.style.backgroundColor === 'red' ? 'var(--bg-color)' : 'red';
                }, 200);
                
                setTimeout(() => {
                    clearInterval(flash);
                    document.body.style.backgroundColor = 'var(--bg-color)';
                }, 1000);
            }
            
            // Actualizar récord si es necesario
            if (score > highScore) {
                highScore = score;
                highScoreDisplay.textContent = highScore;
                localStorage.setItem('simonHighScore', highScore);
            }
            
            // Reiniciar variables del juego
            sequence = [];
            playerSequence = [];
            score = 0;
            scoreDisplay.textContent = score;
        }
        
        // Iniciar juego
        function startGame() {
            if (sequence.length > 0) return; // Evitar múltiples inicios
            
            messageDisplay.textContent = "Observa atentamente la secuencia...";
            score = 0;
            scoreDisplay.textContent = score;
            sequence = [];
            playerSequence = [];
            
            setTimeout(() => {
                nextStep();
            }, 1000);
        }
        
        // Reiniciar juego
        function restartGame() {
            gameOver(); // Esto limpiará todo
            setTimeout(startGame, 500);
        }
        
        // Event listeners
        buttons.forEach(button => {
            button.addEventListener('click', () => {
                handleButtonClick(button.id);
            });
        });
        
        startBtn.addEventListener('click', startGame);
        restartBtn.addEventListener('click', restartGame);
    </script>
</body>
</html>
