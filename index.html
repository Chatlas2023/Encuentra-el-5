<!DOCTYPE html>
<html>
<head>
    <title>Test GeoJSON Barrio</title>
    <style>
        body { font-family: sans-serif; }
        #resultado { font-size: 1.2em; font-weight: bold; }
    </style>
</head>
<body>
    <h1>¿En qué barrio estoy?</h1>
    <p>Cargando ubicación...</p>
    <div id="resultado"></div>

    <script>
        // Reemplaza con la URL RAW de tu archivo Barrios_AMBA.geojson en GitHub
        const geojsonUrl = 'https://raw.githubusercontent.com/Chatlas2023/Seguime/main/Barrios_AMBA.geojson';
        const resultadoDiv = document.getElementById('resultado');

        function isPointInPolygon(point, polygon) {
            const x = point[0];
            const y = point[1];
            let inside = false;
            for (let i = 0, j = polygon.length - 1; i < polygon.length; j = i++) {
                const xi = polygon[i][0];
                const yi = polygon[i][1];
                const xj = polygon[j][0];
                const yj = polygon[j][1];
                const intersect = ((yi > y) !== (yj > y)) && (x < (xj - xi) * (y - yi) / (yj - yi) + xi);
                if (intersect) inside = !inside;
            }
            return inside;
        }

        function findBarrio(latitude, longitude, geojson) {
            const point = [longitude, latitude]; // GeoJSON usa [longitude, latitude]
            for (const feature of geojson.features) {
                if (feature.geometry.type === 'Polygon') {
                    const coordinates = feature.geometry.coordinates[0]; // Asumiendo polígonos simples
                    if (isPointInPolygon(point, coordinates)) {
                        return feature.properties.name; // Ajusta 'nombre' al campo correcto en tu GeoJSON
                    }
                } else if (feature.geometry.type === 'MultiPolygon') {
                    for (const polygon of feature.geometry.coordinates) {
                        if (isPointInPolygon(point, polygon[0])) {
                            return feature.properties.nombre; // Ajusta 'nombre' al campo correcto en tu GeoJSON
                        }
                    }
                }
            }
            return 'Barrio no encontrado';
        }

        navigator.geolocation.getCurrentPosition(async position => {
            const latitude = position.coords.latitude;
            const longitude = position.coords.longitude;

            try {
                const response = await fetch(geojsonUrl);
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const geojson = await response.json();
                const barrioEncontrado = findBarrio(latitude, longitude, geojson);
                resultadoDiv.textContent = `Estás en el barrio: ${barrioEncontrado}`;
            } catch (error) {
                resultadoDiv.textContent = 'Error al cargar los datos del barrio.';
                console.error('Error:', error);
            }
        }, error => {
            resultadoDiv.textContent = 'Error al obtener la ubicación.';
            console.error('Error getting location:', error);
        });
    </script>
</body>
</html>
```
